<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leads</title>
  <style>
    html,body{height:100%}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0f172a;margin:0;color:#e5e7eb;min-height:100vh;display:flex;flex-direction:column;overflow-x:hidden;width:100vw;max-width:100vw}
    .top{background:#111827;color:#fff;padding:16px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1f2937;flex-wrap:wrap;gap:8px}
    .wrap{padding:20px 20px 0 20px;flex:1;display:flex;flex-direction:column;min-height:0;width:100%;box-sizing:border-box}
    .panel{background:#0b1220;border:1px solid #1f2937;border-radius:12px;display:flex;flex-direction:column;flex:1;min-height:0;margin-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;overflow:hidden;width:100%;box-sizing:border-box}
    .panel h3{margin:0;padding:14px 16px;border-bottom:1px solid #1f2937;word-wrap:break-word;overflow-wrap:break-word}
    .panel .body{padding:16px;display:flex;flex-direction:column;flex:1;min-height:0;width:100%;box-sizing:border-box}
    .btn{padding:8px 10px;border:1px solid #334155;border-radius:8px;background:#111827;color:#e5e7eb;cursor:pointer;box-sizing:border-box;word-wrap:break-word;overflow-wrap:break-word}
    .tablewrap{flex:1;min-height:0;overflow-x:auto;overflow-y:auto;width:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;border:1px solid #1f2937;border-radius:8px;position:relative}
    .tablewrap::-webkit-scrollbar{height:8px;width:8px}
    .tablewrap::-webkit-scrollbar-track{background:#1f2937;border-radius:4px}
    .tablewrap::-webkit-scrollbar-thumb{background:#4b5563;border-radius:4px}
    .tablewrap::-webkit-scrollbar-thumb:hover{background:#6b7280}
    table{width:100%;border-collapse:collapse;font-size:14px;min-width:1400px;table-layout:fixed}
    th,td{padding:10px;border-bottom:1px solid #1f2937;color:#cbd5e1;word-wrap:break-word;overflow-wrap:break-word;box-sizing:border-box;vertical-align:top;white-space:normal;overflow:visible}
    th{position:sticky;top:0;background:#111827;color:#93c5fd;text-transform:uppercase;font-size:12px;letter-spacing:.05em;z-index:10}
    .small{color:#94a3b8;font-size:12px;word-wrap:break-word;overflow-wrap:break-word}
    
    /* Scroll indicator */
    .tablewrap::after{content:"← Scroll horizontally to see all columns →";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.8);color:#fff;padding:8px 16px;border-radius:20px;font-size:12px;pointer-events:none;opacity:0;transition:opacity 0.3s ease;z-index:20}
    .tablewrap:hover::after{opacity:1}
    
    /* Fixed column widths for consistent display */
    th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
    th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
    th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
    th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
    th:nth-child(5), td:nth-child(5) { width: 180px; min-width: 180px; } /* Date */
    th:nth-child(6), td:nth-child(6) { width: 150px; min-width: 150px; } /* Status */
    th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    
    /* iPad Mini and similar tablets (768x1024) */
    @media (max-width: 1024px) and (min-width: 768px) {
      .top{padding:12px 16px;flex-wrap:wrap;gap:6px}
      .wrap{padding:16px 16px 0 16px}
      .panel h3{padding:12px 14px;font-size:16px}
      .panel .body{padding:14px}
      .tablewrap{overflow-x:auto;overflow-y:auto;-webkit-overflow-scrolling:touch;width:100%;max-width:100%}
      table{font-size:13px;min-width:1500px;table-layout:fixed;width:1500px}
      th,td{padding:8px;white-space:normal;overflow:visible}
      th{font-size:11px}
      .small{font-size:11px}
      
      /* Fixed column widths for iPad Mini - wider to ensure scrolling */
      th:nth-child(1), td:nth-child(1) { width: 200px; min-width: 200px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 400px; min-width: 400px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 200px; min-width: 200px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 400px; min-width: 400px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 200px; min-width: 200px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 150px; min-width: 150px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 200px; min-width: 200px; } /* Conversation */
    }
    
    /* iPad Air and similar tablets (820x1180) */
    @media (max-width: 1024px) and (min-width: 820px) {
      .top{padding:12px 16px;flex-wrap:wrap;gap:6px}
      .wrap{padding:16px 16px 0 16px}
      .panel h3{padding:12px 14px;font-size:16px}
      .panel .body{padding:14px}
      .tablewrap{overflow-x:auto;overflow-y:auto;-webkit-overflow-scrolling:touch;width:100%;max-width:100%}
      table{font-size:13px;min-width:1600px;table-layout:fixed;width:1600px}
      th,td{padding:8px;white-space:normal;overflow:visible}
      th{font-size:11px}
      .small{font-size:11px}
      
      /* Fixed column widths for iPad Air - wider to ensure scrolling */
      th:nth-child(1), td:nth-child(1) { width: 220px; min-width: 220px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 450px; min-width: 450px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 220px; min-width: 220px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 450px; min-width: 450px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 220px; min-width: 220px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 180px; min-width: 180px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 220px; min-width: 220px; } /* Conversation */
    }
    
    /* Other tablets and smaller desktop */
    @media (max-width: 1024px) {
      .top{padding:12px 16px;flex-wrap:wrap;gap:6px}
      .wrap{padding:16px 16px 0 16px}
      .panel h3{padding:12px 14px;font-size:16px}
      .panel .body{padding:14px}
      .tablewrap{overflow-x:auto;overflow-y:auto;-webkit-overflow-scrolling:touch;width:100%;max-width:100%}
      table{font-size:13px;min-width:1400px;table-layout:fixed;width:1400px}
      th,td{padding:8px;white-space:normal;overflow:visible}
      th{font-size:11px}
      .small{font-size:11px}
      
      /* Fixed column widths for tablet */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 180px; min-width: 180px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 150px; min-width: 150px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
    
    /* Mobile landscape and small tablets */
    @media (max-width: 768px) {
      .top{padding:10px 12px;flex-direction:column;align-items:flex-start;gap:8px}
      .top div:first-child{font-size:16px}
      .top .small{font-size:12px}
      .wrap{padding:12px 12px 0 12px}
      .panel h3{padding:10px 12px;font-size:15px}
      .panel .body{padding:12px}
      .btn{padding:6px 8px;font-size:13px}
      table{font-size:12px;min-width:1400px;table-layout:fixed}
      th,td{padding:6px;font-size:12px}
      th{font-size:10px;padding:6px 4px}
      .small{font-size:10px}
      
      /* Fixed column widths for mobile landscape */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 180px; min-width: 180px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 150px; min-width: 150px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
    
    /* Mobile portrait */
    @media (max-width: 480px) {
      .top{padding:8px 10px;flex-direction:column;align-items:flex-start;gap:6px}
      .top div:first-child{font-size:14px}
      .top .small{font-size:11px}
      .wrap{padding:10px 10px 0 10px}
      .panel h3{padding:8px 10px;font-size:14px}
      .panel .body{padding:10px}
      .btn{padding:5px 7px;font-size:12px}
      table{font-size:11px;min-width:1400px;table-layout:fixed}
      th,td{padding:4px;font-size:11px}
      th{font-size:9px;padding:4px 3px}
      .small{font-size:9px}
      
      /* Fixed column widths for mobile portrait */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 150px; min-width: 150px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 120px; min-width: 120px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
    
    /* Very small mobile */
    @media (max-width: 360px) {
      .top{padding:6px 8px;flex-direction:column;align-items:flex-start;gap:4px}
      .top div:first-child{font-size:13px}
      .top .small{font-size:10px}
      .wrap{padding:8px 8px 0 8px}
      .panel h3{padding:6px 8px;font-size:13px}
      .panel .body{padding:8px}
      .btn{padding:4px 6px;font-size:11px}
      table{font-size:10px;min-width:1400px;table-layout:fixed}
      th,td{padding:3px;font-size:10px}
      th{font-size:8px;padding:3px 2px}
      .small{font-size:8px}
      
      /* Fixed column widths for very small mobile */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 150px; min-width: 150px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 120px; min-width: 120px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
    
    /* Ultra small mobile */
    @media (max-width: 320px) {
      .top{padding:4px 6px;flex-direction:column;align-items:flex-start;gap:3px}
      .top div:first-child{font-size:12px}
      .top .small{font-size:9px}
      .wrap{padding:6px 6px 0 6px}
      .panel h3{padding:4px 6px;font-size:12px}
      .panel .body{padding:6px}
      .btn{padding:3px 5px;font-size:10px}
      table{font-size:9px;min-width:1400px;table-layout:fixed}
      th,td{padding:2px;font-size:9px}
      th{font-size:7px;padding:2px 1px}
      .small{font-size:7px}
      
      /* Fixed column widths for ultra small mobile */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 150px; min-width: 150px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 120px; min-width: 120px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
    
    /* Landscape mobile */
    @media (max-width: 768px) and (orientation: landscape) {
      .top{padding:8px 12px;flex-direction:row;justify-content:space-between;align-items:center}
      .wrap{padding:10px 12px 0 12px}
      .panel h3{padding:8px 12px;font-size:14px}
      .panel .body{padding:10px}
      table{font-size:11px;min-width:1400px;table-layout:fixed}
      th,td{padding:5px}
      th{font-size:9px}
      .small{font-size:9px}
      
      /* Fixed column widths for landscape mobile */
      th:nth-child(1), td:nth-child(1) { width: 180px; min-width: 180px; } /* Name */
      th:nth-child(2), td:nth-child(2) { width: 350px; min-width: 350px; } /* Email */
      th:nth-child(3), td:nth-child(3) { width: 180px; min-width: 180px; } /* Phone */
      th:nth-child(4), td:nth-child(4) { width: 350px; min-width: 350px; } /* Message */
      th:nth-child(5), td:nth-child(5) { width: 150px; min-width: 150px; } /* Date */
      th:nth-child(6), td:nth-child(6) { width: 120px; min-width: 120px; } /* Status */
      th:nth-child(7), td:nth-child(7) { width: 180px; min-width: 180px; } /* Conversation */
    }
  </style>
</head>
<body>
  <div class="top">
    <div><strong>Product Sales Dashboard</strong></div>
    <div class="small">Logged in: {{ username }}</div>
  </div>
  <div class="wrap">
    <div style="margin-bottom:12px"><button class="btn" onclick="history.back()">← Back</button></div>
    <div class="panel">
      <h3>Lead Management</h3>
      <div class="body">
        <div class="tablewrap">
          <table>
            <thead><tr><th>Name</th><th>Email</th><th>Phone</th><th>Message</th><th>Date</th><th>Status</th><th>Conversation</th></tr></thead>
            <tbody>
              {% for l in leads %}
              <tr>
                <td>{{ l.name }}</td>
                <td>{{ l.email }}</td>
                <td>{{ l.phone }}</td>
                <td class="small">{{ l.message if l.message else 'User registered via chatbot conversation' }}</td>
                <td class="small">{{ l.created_at }}</td>
                <td><span class="small" style="background:#064e3b;color:#34d399;padding:4px 8px;border-radius:9999px;">{{ l.status if l.status else 'New' }}</span></td>
                <td>{{ l.session_id or 'N/A' }}</td>
              </tr>
              {% endfor %}
              {% if leads|length == 0 %}<tr><td colspan="7" class="small">No leads</td></tr>{% endif %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</body>
</html>



